/*!
 * angular-schema-form-material
 * @version 1.0.0-alpha.3
 * @date Fri, 06 Oct 2017 02:59:29 GMT
 * @link https://github.com/json-schema-form/angular-schema-form-material
 * @license MIT
 * Copyright (c) 2014-2017 JSON Schema Form
 */
!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=29)}([function(e,t){var n="/material/default.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<md-input-container class="schema-form-{{::form.type}} {{::form.htmlClass}}"\n                    ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false}"\n                    sf-messages sf-layout sf-material-class="md-input-has-value">\n  <label  ng-show="showTitle()" for="{{::form.key|sfCamelKey}}">{{::form.title}}</label>\n  <input sf-field-model\n         ng-show="::form.key"\n         type="{{::form.type}}"\n         step="any"\n         sf-changed="form"\n         placeholder="{{::form.placeholder}}"\n         id="{{::form.key|sfCamelKey}}"\n         ng-class="::form.fieldHtmlClass"\n         sf-type-parser="form.schema"\n         ng-disabled="::form.readonly"\n         schema-validate="form"\n         name="{{::form.key|sfCamelKey}}"\n         aria-describedby="{{::form.key|sfCamelKey}}Status" />\n         <span ng-class="::form.hintClass" ng-if="::form.hint.length">{{::form.hint}}</span>\n</md-input-container>\n')}]),e.exports=n},function(e,t){var n="/material/checkbox.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="checkbox schema-form-checkbox {{::form.htmlClass}}"\n     ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"\n     sf-messages>\n  <md-checkbox sf-field-model\n               sf-changed="form"\n               ng-disabled="form.readonly"\n               schema-validate="form"\n               sf-material-class="md-checked"\n               class="{{::form.fieldHtmlClass}}"\n               name="{{::form.key|sfCamelKey}}"\n               aria-label="{{::form.title}}">\n    <span>{{::form.title}}</span>\n  </md-checkbox>\n</div>\n')}]),e.exports=n},function(e,t){var n="/material/submit.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<section class="schema-form-submit {{::form.htmlClass}}" sf-messages>\n  <md-button class="md-raised {{ form.style || \'md-primary\' }} {{::form.fieldHtmlClass}}"\n             type="{{::form.type}}"\n             ng-disabled="form.readonly"\n             aria-label="{{::form.title}}">\n    <md-tooltip ng-if="::form.tip">{{::form.tip}}</md-tooltip>\n    {{::form.title}}\n  </md-button>\n</section>\n')}]),e.exports=n},function(e,t,n){n(22),n(21),n(20)},function(e,t){var n="/material/actions.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<section layout="row" class="btn-group schema-form-actions {{form.htmlClass}}"></section>\n')}]),e.exports=n},function(e,t){var n="/material/array.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div  class="schema-form-array {{::form.htmlClass}}"\n      sf-field-model="sf-new-array"\n      sf-new-array>\n  <label class="control-label" ng-show="showTitle()">{{ form.title }}</label>\n  <md-list class="list-group" sf-field-model ui-sortable="form.sortOptions">\n    <md-list-item layout="row" class="list-group-item"\n             sf-field-model="ng-repeat"\n             ng-repeat="item in modelArray track by $index"\n             schema-form-array-items\n             class="{{::form.fieldHtmlClass}}">\n      <md-button flex="none" flex-order="2"\n                 type="button"\n                 ng-hide="form.readonly || form.remove === null"\n                 ng-click="deleteFromArray($index)"\n                 ng-disabled="form.schema.minItems >= modelArray.length"\n                 class="md-icon-button" aria-label="More"\n                 style="position: relative; z-index: 20;">\n        <md-icon>close</md-icon>\n      </md-button>\n    </md-list-item>\n  </md-list>\n  <div class="clearfix" style="padding: 15px;" ng-model="modelArray" schema-validate="form">\n    <div class="help-block"\n         ng-show="(hasError() && errorMessage(schemaError())) || form.description"\n         ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div>\n\n    <md-button ng-hide="form.readonly || form.add === null"\n            ng-click="appendToArray()"\n            ng-disabled="form.schema.maxItems <= modelArray.length"\n            type="button"\n            class="btn md-raised md-primary {{ form.style.add || \'btn-default\' }} pull-right">\n      <i class="glyphicon glyphicon-plus"></i>\n      {{ form.add || \'Add\'}}\n    </md-button>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="/material/autocomplete.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="form-group {{::form.htmlClass}} schema-form-select"\n     ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false}"\n     sf-messages sf-layout>\n  <md-autocomplete flex\n    ng-disabled="form.readonly"\n    ng-model="$$value$$"\n    sf-autocomplete\n    sf-field-model="replaceAll"\n    schema-validate="form"\n    md-selected-item="$$value$$"\n    md-search-text="searchText"\n    md-selected-item-change="\'todo\';"\n    md-items="item in evalExpr(\'this[\\\'\'+form.optionFilter+\'\\\'](\\\'\'+searchText+\'\\\')\')"\n    md-item-text="item.name"\n    md-floating-label="{{::form.title}}"\n    md-menu-class="autocomplete-custom-template">\n    <md-item-template>\n      <span md-highlight-text="searchText">{{item.name}}</span>\n    </md-item-template>\n    <md-not-found>\n      No matches found\n    </md-not-found>\n  </md-autocomplete>\n</div>\n')}]),e.exports=n},function(e,t){var n="/material/checkboxes.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div sf-array="form" sf-field-model\n     class="form-group schema-form-checkboxes {{::form.htmlClass}}"\n     ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}"\n     sf-messages>\n  <label class="control-label" ng-show="showTitle()">{{::form.title}}</label>\n  <div class="checkboxes" sf-layout>\n    <div class="checkbox" ng-repeat="val in titleMapValues track by $index">\n      <md-checkbox ng-model="titleMapValues[$index]"\n                   sf-changed="form"\n                   ng-disabled="::form.readonly || form.titleMap[$index].readonly"\n                   ng-class="::form.fieldHtmlClass"\n                   name="{{::form.key|sfCamelKey}}"\n                   ng-true-value="true"\n                   ng-false-value="false"\n                   aria-label="{{::form.title}}">\n        {{::form.titleMap[$index].name}}\n      </md-checkbox>\n    </div>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="/material/date.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="schema-form-date {{::form.htmlClass}}">\n  <label ng-show="showTitle()" for="{{::form.key|sfCamelKey}}">{{::form.title}}</label>\n  <md-datepicker sf-field-model\n                 sf-changed="form"\n                 schema-validate="form"\n                 sf-type-parser="form.schema"\n                 id="{{::form.key|sfCamelKey}}"\n                 ng-show="::form.key"\n                 ng-class="::form.fieldHtmlClass"\n                 ng-disabled="::form.readonly"\n                 md-placeholder="Enter date" sf-messages>\n  </md-datepicker>\n</div>\n')}]),e.exports=n},function(e,t){var n="/material/fieldset.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<fieldset ng-disabled="form.readonly" class="standard {{form.htmlClass}}" flex>\n  <legend ng-show="form.title">{{ form.title }}</legend>\n</fieldset>\n')}]),e.exports=n},function(e,t){var n="/material/help.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="helpvalue schema-form-helpvalue {{form.htmlClass}}" ng-bind-html="form.helpvalue"></div>\n')}]),e.exports=n},function(e,t){var n="/material/radio-buttons.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="form-group schema-form-radiobuttons {{::form.htmlClass}}"\n     ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}" sf-layout sf-messages>\n  <div>\n    <label class="control-label" ng-show="showTitle()">{{form.title}}</label>\n  </div>\n  <section layout="row" layout-sm="column" layout-align="center center">\n    <md-input-container ng-repeat="item in form.titleMap">\n      <md-button type="button"\n                 class="group md-raised"\n                 sf-field-model="replaceAll"\n                 ng-model="$$value$$"\n                 sf-changed="form"\n                 class="radio {{::form.fieldHtmlClass}}"\n                 ng-class="{\'md-primary\': ($$value$$ == item.value)}"\n                 ng-disabled="form.readonly"\n                 ng-model-options="form.ngModelOptions"\n                 schema-validate="form"\n                 ng-value="item.value"\n                 ng-click="$$value$$ = item.value"\n                 name="{{form.key.join(\'.\')}}">\n        <span ng-bind-html="item.name"></span>\n      </md-button>\n    </md-input-container>\n  </section>\n</div>\n')}]),e.exports=n},function(e,t){var n="/material/radios-inline.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="form-group schema-form-radios-inline {{::form.htmlClass}}"\n     ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}" sf-layout sf-messages>\n  <label class="control-label" ng-show="showTitle()">{{form.title}}</label>\n  <md-radio-group layout="row"\n                  sf-field-model="replaceAll"\n                  ng-model="$$value$$"\n                  class="{{::form.fieldHtmlClass}}"\n                  ng-class="{ active: item.value === $$value$$ }"\n                  sf-changed="form"\n                  schema-validate="form"\n                  ng-disabled="form.readonly"\n                  name="{{form.key.join(\'.\')}}">\n    <md-radio-button ng-repeat="item in form.titleMap" ng-value="item.value" aria-label="item.name">\n      <span ng-bind-html="item.name"></span>\n    </md-radio-button>\n  </md-radio-group>\n</div>\n')}]),e.exports=n},function(e,t){var n="/material/radios.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div class="form-group schema-form-radios {{::form.htmlClass}}"\n     ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n  <label class="control-label" ng-show="showTitle()" aria-label="{{form.title}}" layout="row">{{form.title}}</label>\n  <div>\n    <md-radio-group sf-field-model\n                    sf-changed="form"\n                    schema-validate="form"\n                    ng-disabled="form.readonly"\n                    name="{{form.key.join(\'.\')}}"\n                    sf-layout sf-messages>\n      <md-radio-button ng-repeat="item in form.titleMap"\n                       ng-value="item.value"\n                       class="{{::form.fieldHtmlClass}}"\n                       sf-field-model="ng-class"\n                       aria-label="item.name"\n                       ng-class="{ active: item.value === $$value$$ }">\n        <span ng-bind-html="item.name"></span>\n      </md-radio-button>\n    </md-radio-group>\n  </div>\n</div>\n')}]),e.exports=n},function(e,t){var n="/material/section.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<md-content class="schema-form-section {{::form.htmlClass}}" sf-layout>\n</md-content>\n')}]),e.exports=n},function(e,t){var n="/material/select.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<md-input-container\n    class="form-group {{::form.htmlClass}} schema-form-select"\n    ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false}"\n    sf-messages sf-layout>\n  <label ng-show="::showTitle()">{{::form.title}}</label>\n  <md-select sf-field-model sf-changed="form" schema-validate="form" ng-disabled="form.readonly">\n    <md-optgroup ng-repeat-start="(key, opt) in form.titleMap | orderBy:\'group\' as optGroups"\n                 ng-if="opt.group && opt.group != optGroups[key-1].group"\n                 label="{{::opt.group}}"\n                 aria-label="{{::opt.group}}">\n      <md-option ng-repeat="(key, filtered) in form.titleMap | filter: {group: opt.group} | orderBy:\'name\' as opts"\n                 ng-value="::filtered.value"\n                 aria-label="{{::filtered.name}}">{{::filtered.name}}</md-option>\n    </md-optgroup>\n    <md-option   ng-if="!opt.group"\n                 ng-value="::opt.value"\n                 ng-repeat-end>{{::opt.name}}</md-option>\n  </md-select>\n</md-input-container>\n')}]),e.exports=n},function(e,t){var n="/material/switch.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<md-input-container class="schema-form-switch {{::form.htmlClass}}">\n  <md-switch sf-field-model\n             sf-changed="form"\n             sf-type-parser="form.schema"\n             sf-messages\n             schema-validate="form"\n             id="{{::form.key|sfCamelKey}}"\n             aria-label="{{form.title}}"\n             ng-show="::form.key"\n             ng-class="form.fieldHtmlClass"\n             ng-disabled="::form.readonly">\n    <span  ng-show="showTitle()" for="{{::form.key|sfCamelKey}}">{{::form.title}}</span>\n  </md-switch>\n</md-input-container>\n')}]),e.exports=n},function(e,t){var n="/material/tabarray.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'\n<div sf-array="form" ng-init="selected = { tab: 0 }"\n     class="clearfix schema-form-tabarray schema-form-tabarray-{{form.tabType || \'left\'}} {{::form.htmlClass}}">\n  <div ng-if="!form.tabType || form.tabType !== \'right\'"\n       ng-class="{\'col-xs-3\': !form.tabType || form.tabType === \'left\'}">\n    <ul class="nav nav-tabs"\n        ng-class="{ \'tabs-left\': !form.tabType || form.tabType === \'left\'}">\n      <li ng-repeat="item in modelArray track by $index"\n          ng-click="$event.preventDefault() || (selected.tab = $index)"\n          ng-class="{active: selected.tab === $index}">\n          <a href="#">{{interp(form.title,{\'$index\':$index, value: item}) || $index}}</a>\n      </li>\n      <li ng-hide="form.readonly" ng-click="$event.preventDefault() || (selected.tab = appendToArray().length - 1)">\n        <a href="#">\n          <i class="glyphicon glyphicon-plus"></i>\n          {{ form.add || \'Add\'}}\n          </a>\n      </li>\n    </ul>\n  </div>\n\n  <div ng-class="{\'col-xs-9\': !form.tabType || form.tabType === \'left\' || form.tabType === \'right\'}">\n    <div class="tab-content {{::form.fieldHtmlClass}}">\n      <div class="tab-pane clearfix"\n           ng-repeat="item in modelArray track by $index"\n           ng-show="selected.tab === $index"\n           ng-class="{active: selected.tab === $index}">\n           <sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator>\n\n\n           <button ng-hide="form.readonly"\n                   ng-click="selected.tab = deleteFromArray($index).length - 1"\n                   type="button"\n                   class="btn {{ form.style.remove || \'btn-default\' }} pull-right">\n             <i class="glyphicon glyphicon-trash"></i>\n             {{ form.remove || \'Remove\'}}\n           </button>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="form.tabType === \'right\'" class="col-xs-3">\n    <ul class="nav nav-tabs tabs-right">\n      <li ng-repeat="item in modelArray track by $index"\n          ng-click="$event.preventDefault() || (selected.tab = $index)"\n          ng-class="{active: selected.tab === $index}">\n          <a href="#">{{interp(form.title,{\'$index\':$index, value: item}) || $index}}</a>\n      </li>\n      <li ng-hide="form.readonly" ng-click="$event.preventDefault() || appendToArray()">\n        <a href="#">\n          <i class="glyphicon glyphicon-plus"></i>\n          {{ form.add || \'Add\'}}\n          </a>\n      </li>\n    </ul>\n  </div>\n\n</div>\n')}]),e.exports=n},function(e,t){var n="/material/tabs.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<div sf-field-model class="schema-form-tabs {{::form.htmlClass}}">\n  <md-tabs md-dynamic-height md-selected="selected" md-autoselect ng-init="selected = 0"></md-tabs>\n</div>\n')}]),e.exports=n},function(e,t){var n="/material/textarea.html";window.angular.module("ng").run(["$templateCache",function(e){e.put(n,'<md-input-container class="{{::form.htmlClass}} schema-form-textarea" sf-messages sf-layout>\n  <label ng-show="showTitle()" for="{{::form.key|sfCamelKey}}">{{::form.title}}</label>\n  <textarea ng-class="::form.fieldHtmlClass"\n            id="{{::form.key|sfCamelKey}}"\n            sf-changed="form"\n            ng-disabled="::form.readonly"\n            sf-field-model\n            schema-validate="form"\n            name="{{::form.key|sfCamelKey}}"></textarea>\n</md-input-container>\n')}]),e.exports=n},function(e,t){function n(e,t){return{restrict:"A",scope:!1,link:function(e,n,r,a){function o(e,t){return e[t]}var i;try{i=e.form.key.reduce(o,e.model)}catch(e){i=void 0}t(function(){null!==i&&void 0!==i&&!1!==i&&n.addClass(r.sfMaterialClass)},0)}}}angular.module("schemaForm").directive("sfMaterialClass",n),n.$inject=["$compile","$timeout"]},function(e,t,n){"use strict";function r(e,t,n,r,i){function l(e){var t=e.fieldFrag.querySelector("[sf-layout]");e.form.grid&&Object.getOwnPropertyNames(e.form.grid).forEach(function(n,r,a){t.setAttribute(n,e.form.grid[n])})}function s(e){var t=e.fieldFrag.querySelector("[sf-messages]");if(t&&I){var n=I.cloneNode();t.appendChild(n)}}function m(e){var t=e.fieldFrag.querySelector("textarea"),n=e.form.maxlength||!1;t&&n&&t.setAttribute("md-maxlength",n)}function f(e){var t=e.fieldFrag.querySelector("md-autocomplete"),n=e.form.minLength||1,r=e.form.maxLength||!1,a=e.form.title||e.form.placeholder||e.form.key.slice(-1)[0];t&&(e.form.onChange&&(t.setAttribute("md-selected-item-change","args.form.onChange()"),t.setAttribute("md-search-text-change","args.form.onChange(searchText)")),t.setAttribute("md-min-length",n),r&&t.setAttribute("md-max-length",r),a&&t.setAttribute("md-floating-label",a))}function u(e){var t=e.fieldFrag.querySelector("md-switch");e.form.schema.titleMap&&(t.setAttribute("ng-true-value",e.form.schema.titleMap.true),t.setAttribute("ng-false-value",e.form.schema.titleMap.false))}function h(e){var t,n,n=e.fieldFrag.querySelector("md-select");if(e.form.selectOptions=[],e.form.getOptions=a,e.form.schema&&e.form.schema.links&&"object"==typeof e.form.schema.links){var r,i=/({)([^}]*)(})/gm;for(t=0;t<e.form.schema.links.length;t++)r=e.form.schema.links[t],"options"===r.rel&&(e.form.optionSource=r.href.replace(i,"$1$1 model.$2 $3$3"));n.setAttribute("sfm-external-options",e.form.optionSource)}else e.form.selectOptions=o(e.form)}function v(e){var t=e.fieldFrag.querySelector("md-datepicker");if(t){e.form.onChange&&t.setAttribute("ng-change","args.form.onChange(searchText)");var n=e.form.minimum||!1,r=e.form.maximum||!1;n&&t.setAttribute("md-max-date",n),r&&t.setAttribute("md-max-date",r)}}function b(e){if(e.form.tabs&&e.form.tabs.length>0){var t=e.fieldFrag.querySelector("md-tabs");e.form.tabs.forEach(function(n,r){var a="(evalExpr("+e.path+".tabs["+r+'].condition, { model: model, "arrayIndex": $index}))',o=document.createElement("md-tab");n.condition&&o.setAttribute("ng-if",a),o.setAttribute("label","{{"+e.path+".tabs["+r+"].title}}");var i=document.createElement("md-tab-body"),l=e.build(n.items,e.path+".tabs["+r+"].items",e.state);i.appendChild(l),o.appendChild(i),t.appendChild(o)})}}function x(t,n,a){if("string"===n.type&&("date"===n.format||"date-time"===n.format)){var o=e.stdFormObj(t,n,a);return o.key=a.path,o.type="date",a.lookup[r.stringify(a.path)]=o,o}}var M=n.builders.simpleTransclusion,C=n.builders.ngModelOptions,F=n.builders.ngModel,O=n.builders.sfField,S=n.builders.condition,P=n.builders.array,q=n.builders.numeric,l=l,I=function(){var e=document.createElement("div");return e.innerHTML='<div ng-if="ngModel.$invalid" ng-messages="ngModel.$error"><div sf-message ng-message></div></div>',e.firstChild}(),L=s,R=h,z=f,_=u,W=v,G=b,J=m,Z=[O,F,C,S,l],Q=Z.concat(L),X=Z.concat(P);e.defaults.string.unshift(x),t.defineDecorator("materialDecorator",{actions:{template:c.a,builder:[O,M,S]},array:{template:d.a,builder:X},autocomplete:{template:p.a,builder:Q.concat(z)},boolean:{template:g.a,builder:Q},button:{template:y.a,builder:Q},checkbox:{template:g.a,builder:Q},checkboxes:{template:$.a,builder:X},date:{template:k.a,builder:Q.concat(W)},default:{template:w.a,builder:Q},fieldset:{template:A.a,builder:[O,M,S]},help:{template:E.a,builder:Q},number:{template:w.a,builder:Q.concat(q)},password:{template:w.a,builder:Q},radios:{template:V.a,builder:Q},"radios-inline":{template:D.a,builder:Q},radiobuttons:{template:T.a,builder:Q},section:{template:j.a,builder:[O,M,S,l]},select:{template:N.a,builder:Q.concat(R)},submit:{template:y.a,builder:Q},tabs:{template:H.a,builder:[O,G,S]},tabarray:{template:U.a,builder:X},textarea:{template:B.a,builder:Q.concat(J)},switch:{template:K.a,builder:Q.concat(_)}})}function a(e,t){return e.optionData?t(e.optionData):e.selectOptions?e.selectOptions:[]}function o(e){var t=[];if(e.titleMap)return e.titleMap;if(e.enum&&e.enum.length)for(i=0;i<e.enum.length;i++)e.enum[i]&&e.enum[i].length&&t.push({name:e.enum[i],value:e.enum[i]});return t}function l(e){function t(t,n,r){r.$observe("sfmExternalOptions",function(n){e.get(n).then(function(e){t.form.selectOptions=o(e.data)})})}return{link:t,restrict:"A"}}function s(){return function(e){if(!e)return"";var t,n,r;for(r=e.slice(),n=0;n<r.length;n++)t=r[n].toLowerCase().split(""),n&&t.length&&(t[0]=t[0].toUpperCase()),r[n]=t.join("");return r.join("")}}Object.defineProperty(t,"__esModule",{value:!0});var m=n(4),c=n.n(m),f=n(5),d=n.n(f),u=n(6),p=n.n(u),h=n(1),g=n.n(h),v=n(2),y=n.n(v),b=n(7),$=n.n(b),x=n(8),k=n.n(x),M=n(0),w=n.n(M),C=n(9),A=n.n(C),F=n(10),E=n.n(F),O=n(13),V=n.n(O),S=n(12),D=n.n(S),P=n(11),T=n.n(P),q=n(14),j=n.n(q),I=n(15),N=n.n(I),L=n(16),K=n.n(L),R=n(18),H=n.n(R),z=n(17),U=n.n(z),_=n(19),B=n.n(_);angular.module("schemaForm").config(r).directive("sfmExternalOptions",l).filter("sfCamelKey",s),r.$inject=["schemaFormProvider","schemaFormDecoratorsProvider","sfBuilderProvider","sfPathProvider","$injector"],l.$inject=["$http"]},function(e,t){angular.module("schemaForm").directive("sfTypeParser",function(){return{restrict:"A",scope:!1,require:"ngModel",link:function(e,t,n,r){var a=e.$watch(n.sfTypeParser,function(e){if(e){var t=-1!==e.type.indexOf("number"),n=-1!==e.type.indexOf("integer"),o=/^[0-9]*$/;(t||n)&&r.$parsers.push(function(e){var n;return t?n=parseFloat(e):o.test(e)&&(n=parseInt(e,10)),console.log("parser",o.test(e),e,n),void 0===n||isNaN(n)?e:n}),a()}})}}})},function(e,t,n){var r,a,o;!function(i,l){a=[n(26),n(24),n(27)],r=l,void 0!==(o="function"==typeof r?r.apply(t,a):r)&&(e.exports=o)}(0,function(e,t,n){var r=[];try{e.module("ngSanitize"),r.push("ngSanitize")}catch(e){}try{e.module("ui.sortable"),r.push("ui.sortable")}catch(e){}try{e.module("angularSpectrumColorpicker"),r.push("angularSpectrumColorpicker")}catch(e){}var a=e.module("schemaForm",r);return e.module("schemaForm").provider("sfPath",[function(){var n=window.ObjectPath||t,r={parse:n.parse};1===e.version.major&&e.version.minor<3?r.stringify=function(e){return Array.isArray(e)?e.join("."):e.toString()}:r.stringify=n.stringify,r.normalize=function(e,t){return r.stringify(Array.isArray(e)?e:r.parse(e),t)},this.parse=r.parse,this.stringify=r.stringify,this.normalize=r.normalize,this.$get=function(){return r}}]),e.module("schemaForm").provider("sfBuilder",["sfPathProvider",function(t){var n=/[A-Z]/g,r=function(e,t){return t=t||"_",e.replace(n,function(e,n){return(n?t:"")+e.toLowerCase()})},a=0,o={sfField:function(e){e.fieldFrag.firstChild.setAttribute("sf-field",a),e.lookup["f"+a]=e.form,a++},ngModel:function(e){if(e.form.key){var n=e.form.key;e.state.keyRedaction&&(n=n.slice(e.state.keyRedaction));var r;if(e.state.modelValue)r=e.state.modelValue;else{var a=t.stringify(n).replace(/"/g,"&quot;");r=e.state.modelName||"model",a&&(r+=("["!==a[0]?".":"")+a)}for(var o=e.fieldFrag.querySelectorAll("[sf-field-model]"),i=0;i<o.length;i++){var l=o[i],s=l.getAttribute("sf-field-model");if(s&&""!==s)if("replaceAll"===s)for(var m=l.attributes,c=0;c<m.length;c++)m[c].value&&-1!==m[c].value.indexOf("$$value")&&(m[c].value=m[c].value.replace(/\$\$value\$\$/g,r));else{var f=l.getAttribute(s);f&&f.indexOf("$$value$$")?l.setAttribute(s,f.replace(/\$\$value\$\$/g,r)):l.setAttribute(s,r)}else l.setAttribute("ng-model",r)}}},simpleTransclusion:function(e){var t=e.build(e.form.items,e.path+".items",e.state);e.fieldFrag.firstChild.appendChild(t)},ngModelOptions:function(e){e.form.ngModelOptions&&Object.keys(e.form.ngModelOptions).length>0&&e.fieldFrag.firstChild.setAttribute("ng-model-options",JSON.stringify(e.form.ngModelOptions))},transclusion:function(e){var t=e.fieldFrag.querySelectorAll("[sf-field-transclude]");if(t.length)for(var n=0;n<t.length;n++){var r=t[n],a=r.getAttribute("sf-field-transclude")||"items",o=e.form[a];if(o){var i=e.build(o,e.path+"."+a,e.state);r.appendChild(i)}}},condition:function(e){if(e.form.condition){var n="evalExpr("+e.path+'.condition, { model: model, "arrayIndex": $index})';if(e.form.key){var r=t.stringify(e.form.key);n="evalExpr("+e.path+'.condition,{ model: model, "arrayIndex": $index, "modelValue": model'+("["===r[0]?"":".")+r+"})"}for(var a=e.fieldFrag.children||e.fieldFrag.childNodes,o=0;o<a.length;o++){var i=a[o],l=i.getAttribute("ng-if");i.setAttribute("ng-if",l?"("+l+") || ("+n+")":n)}}},array:function(n){var r=n.fieldFrag.querySelector("[schema-form-array-items]");if(r){state=e.copy(n.state),state.keyRedaction=state.keyRedaction||0,state.keyRedaction+=n.form.key.length+1,n.form.schema&&n.form.schema.items&&n.form.schema.items.type&&-1===n.form.schema.items.type.indexOf("object")&&-1===n.form.schema.items.type.indexOf("array")?(t.stringify(n.form.key).replace(/"/g,"&quot;"),state.modelValue="modelArray[$index]"):state.modelName="item",state.arrayCompatFlag=!0;var a=n.build(n.form.items,n.path+".items",state);r.appendChild(a)}}};this.builders=o;var i=[o.sfField,o.ngModel,o.ngModelOptions,o.condition];this.stdBuilders=i,this.$get=["$templateCache","schemaFormDecorators","sfPath",function(e,t,n){var a=function(e,t){if(e.key){var r=t[n.stringify(e.key)];if(r){for(;r.firstChild;)r.removeChild(r.firstChild);return r}}},l=function(e,t,n,o,i,s,m){s=s||{},m=m||Object.create(null),i=i||"schemaForm.form";var c=document.createDocumentFragment();return e.reduce(function(e,c,f){if(!c.type)return e;var d=t[c.type]||t.default;if(d.replace){var u;s.arrayCompatFlag=!1;var p=document.createElement("div"),h=n(c,d)||n(c,t.default);for(p.innerHTML=h,u=document.createDocumentFragment();p.childNodes.length>0;)u.appendChild(p.childNodes[0]);var g={fieldFrag:u,form:c,lookup:m,state:s,path:i+"["+f+"]",build:function(e,r,a){return l(e,t,n,o,r,a,m)}},v=c.builder||d.builder;"function"==typeof v?v(g):v.forEach(function(e){e(g)}),(a(c,o)||e).appendChild(u)}else{var y=document.createElement(r(t.__name,"-"));s.arrayCompatFlag?y.setAttribute("form","copyWithIndex($index)"):y.setAttribute("form",i+"["+f+"]"),(a(c,o)||e).appendChild(y)}return e},c),c};return{build:function(t,n,r,a){return l(t,n,function(t,n){return"template"===t.type?t.template:e.get(n.template)},r,void 0,void 0,a)},builder:o,stdBuilders:i,internalBuild:l}}]}]),e.module("schemaForm").provider("schemaFormDecorators",["$compileProvider","sfPathProvider",function(t,n){var r="",a={},o=function(e,t){"sfDecorator"===e&&(e=r);var n=a[e];return n[t.type]?n[t.type].template:n.default.template},i=function(r){t.directive(r,["$parse","$compile","$http","$templateCache","$interpolate","$q","sfErrorMessage","sfPath","sfSelect",function(t,a,i,l,s,m,c,f,d){return{restrict:"AE",replace:!1,transclude:!1,scope:!0,require:"?^sfSchema",link:function(t,u,p,h){t.$on("schemaFormPropagateNgModelController",function(e,n){e.stopPropagation(),e.preventDefault(),t.ngModel=n}),t.showTitle=function(){return t.form&&!0!==t.form.notitle&&t.form.title},t.listToCheckboxValues=function(t){var n={};return e.forEach(t,function(e){n[e]=!0}),n},t.checkboxValuesToList=function(t){var n=[];return e.forEach(t,function(e,t){e&&n.push(t)}),n},t.buttonClick=function(n,r){e.isFunction(r.onClick)?r.onClick(n,r):e.isString(r.onClick)&&(h?h.evalInParentScope(r.onClick,{$event:n,form:r}):t.$eval(r.onClick,{$event:n,form:r}))},t.evalExpr=function(e,n){return h?h.evalInParentScope(e,n):t.$eval(e,n)},t.evalInScope=function(e,n){return e?t.$eval(e,n):void 0},t.interp=function(e,t){return e&&s(e)(t)},t.hasSuccess=function(){return!!t.ngModel&&(t.ngModel.$valid&&(!t.ngModel.$pristine||!t.ngModel.$isEmpty(t.ngModel.$modelValue)))},t.hasError=function(){return!!t.ngModel&&(t.ngModel.$invalid&&!t.ngModel.$pristine)},t.errorMessage=function(e){return c.interpolate(e&&e.code+""||"default",t.ngModel&&t.ngModel.$modelValue||"",t.ngModel&&t.ngModel.$viewValue||"",t.form,t.options&&t.options.validationMessage)};var g=t.$watch(p.form,function(s){if(s){s.ngModelOptions=s.ngModelOptions||{},t.form=s;var c;if("template"===s.type&&s.template)c=m.when(s.template);else{var p="template"===s.type?s.templateUrl:o(r,s);c=i.get(p,{cache:l}).then(function(e){return e.data})}c.then(function(r){if(s.key){var o=s.key?n.stringify(s.key).replace(/"/g,"&quot;"):"";r=r.replace(/\$\$value\$\$/g,"model"+("["!==o[0]?".":"")+o)}if(u.html(r),s.condition){var i='evalExpr(form.condition,{ model: model, "arrayIndex": arrayIndex})';s.key&&(i='evalExpr(form.condition,{ model: model, "arrayIndex": arrayIndex, "modelValue": model'+f.stringify(s.key)+"})"),e.forEach(u.children(),function(e){var t=e.getAttribute("ng-if");e.setAttribute("ng-if",t?"("+t+") || ("+i+")":i)})}a(u.contents())(t)}),s.key&&(t.$on("schemaForm.error."+s.key.join("."),function(e,n,r,a){(!0===r||!1===r)&&(a=r,r=void 0),t.ngModel&&n&&(t.ngModel.$setDirty?t.ngModel.$setDirty():(t.ngModel.$dirty=!0,t.ngModel.$pristine=!1),r&&(s.validationMessage||(s.validationMessage={}),s.validationMessage[n]=r),t.ngModel.$setValidity(n,!0===a),!0===a&&(t.ngModel.$validate(),t.$broadcast("schemaFormValidate")))}),t.$on("$destroy",function(){if(!t.externalDestructionInProgress){var e=s.destroyStrategy||t.options&&t.options.destroyStrategy||"remove";if(s.key&&"retain"!==e){var n=t.model;if(s.key.length>1&&(n=d(s.key.slice(0,s.key.length-1),n)),void 0===n)return;var r=s.schema&&s.schema.type||"";"empty"===e&&-1!==r.indexOf("string")?n[s.key.slice(-1)]="":"empty"===e&&-1!==r.indexOf("object")?n[s.key.slice(-1)]={}:"empty"===e&&-1!==r.indexOf("array")?n[s.key.slice(-1)]=[]:"null"===e?n[s.key.slice(-1)]=null:delete n[s.key.slice(-1)]}}})),g()}})}}}])},l=function(n,r,a){a=!!e.isDefined(a)&&a,t.directive("sf"+e.uppercase(n[0])+n.substr(1),function(){return{restrict:"EAC",scope:!0,replace:!0,transclude:a,template:'<sf-decorator form="form"></sf-decorator>',link:function(t,r,a){var o={items:"c",titleMap:"c",schema:"c"},i={type:n},l=!0;e.forEach(a,function(n,r){if("$"!==r[0]&&0!==r.indexOf("ng")&&"sfField"!==r){var s=function(n){e.isDefined(n)&&n!==i[r]&&(i[r]=n,l&&i.type&&(i.key||e.isUndefined(a.key))&&(t.form=i,l=!1))};"model"===r?t.$watch(n,function(e){e&&t.model!==e&&(t.model=e)}):"c"===o[r]?t.$watchCollection(n,s):a.$observe(r,s)}})}}})};this.createDecorator=function(t,n){a[t]={__name:t},e.forEach(n,function(e,n){a[t][n]={template:e,replace:!1,builder:[]}}),a[r]||(r=t),i(t)},this.defineDecorator=function(t,n){a[t]={__name:t},e.forEach(n,function(n,r){n.builder=n.builder||[],n.replace=!e.isDefined(n.replace)||n.replace,a[t][r]=n}),a[r]||(r=t),i(t)},this.createDirective=l,this.createDirectives=function(t){e.forEach(t,function(e,t){l(t)})},this.decorator=function(e){return e=e||r,a[e]},this.addMapping=function(e,t,n,r,o){a[e]&&(a[e][t]={template:n,builder:r,replace:!!o})},this.defineAddOn=function(e,t,n,r){a[e]&&(a[e][t]={template:n,builder:r,replace:!0})},this.$get=function(){return{decorator:function(e){return a[e]||a[r]},defaultDecorator:r}},i("sfDecorator")}]),e.module("schemaForm").provider("sfErrorMessage",function(){var t={default:"Field does not validate",0:"Invalid type, expected {{schema.type}}",1:"No enum match for: {{viewValue}}",10:'Data does not match any schemas from "anyOf"',11:'Data does not match any schemas from "oneOf"',12:'Data is valid against more than one schema from "oneOf"',13:'Data matches schema from "not"',100:"Value is not a multiple of {{schema.multipleOf}}",101:"{{viewValue}} is less than the allowed minimum of {{schema.minimum}}",102:"{{viewValue}} is equal to the exclusive minimum {{schema.minimum}}",103:"{{viewValue}} is greater than the allowed maximum of {{schema.maximum}}",104:"{{viewValue}} is equal to the exclusive maximum {{schema.maximum}}",105:"Value is not a valid number",200:"String is too short ({{viewValue.length}} chars), minimum {{schema.minLength}}",201:"String is too long ({{viewValue.length}} chars), maximum {{schema.maxLength}}",202:"String does not match pattern: {{schema.pattern}}",300:"Too few properties defined, minimum {{schema.minProperties}}",301:"Too many properties defined, maximum {{schema.maxProperties}}",302:"Required",303:"Additional properties not allowed",304:"Dependency failed - key must exist",400:"Array is too short ({{value.length}}), minimum {{schema.minItems}}",401:"Array is too long ({{value.length}}), maximum {{schema.maxItems}}",402:"Array items are not unique",403:"Additional items not allowed",500:"Format validation failed",501:'Keyword failed: "{{title}}"',600:"Circular $refs",1e3:"Unknown property (not in schema)"};t.number=t[105],t.required=t[302],t.min=t[101],t.max=t[103],t.maxlength=t[201],t.minlength=t[200],t.pattern=t[202],this.setDefaultMessages=function(e){t=e},this.getDefaultMessages=function(){return t},this.setDefaultMessage=function(e,n){t[e]=n},this.$get=["$interpolate",function(n){var r={};return r.defaultMessages=t,r.interpolate=function(r,a,o,i,l){l=l||{};var s=i.validationMessage||{};0===r.indexOf("tv4-")&&(r=r.substring(4));var m=s.default||l.default||"";[s,l,t].some(function(t){return e.isString(t)||e.isFunction(t)?(m=t,!0):t&&t[r]?(m=t[r],!0):void 0});var c={error:r,value:a,viewValue:o,form:i,schema:i.schema,title:i.title||i.schema&&i.schema.title};return e.isFunction(m)?m(c):n(m)(c)},r}]}),e.module("schemaForm").provider("schemaForm",["sfPathProvider",function(t){var n=function(e){if(Array.isArray(e)&&2==e.length){if("null"===e[0])return e[1];if("null"===e[1])return e[0]}return e},r=function(e){var t=[];return e.forEach(function(e){t.push({name:e,value:e})}),t},a=function(t,n){if(!e.isArray(t)){var r=[];return n?e.forEach(n,function(e,n){r.push({name:t[e],value:e})}):e.forEach(t,function(e,t){r.push({name:e,value:t})}),r}return t},o=function(t,r,a){var o=h[n(r.type)];if(o)for(var i,l=0;l<o.length;l++)if(i=o[l](t,r,a))return i.schema["x-schema-form"]&&e.isObject(i.schema["x-schema-form"])&&(i=e.extend(i,i.schema["x-schema-form"])),i},i=function(t,n,r){r=r||{};var o=r.global&&r.global.formDefaults?e.copy(r.global.formDefaults):{};return r.global&&!0===r.global.supressPropertyTitles?o.title=n.title:o.title=n.title||t,n.description&&(o.description=n.description),(!0===r.required||!0===n.required)&&(o.required=!0),n.maxLength&&(o.maxlength=n.maxLength),n.minLength&&(o.minlength=n.minLength),(n.readOnly||n.readonly)&&(o.readonly=!0),n.minimum&&(o.minimum=n.minimum+(n.exclusiveMinimum?1:0)),n.maximum&&(o.maximum=n.maximum-(n.exclusiveMaximum?1:0)),n.validationMessage&&(o.validationMessage=n.validationMessage),n.enumNames&&(o.titleMap=a(n.enumNames,n.enum)),o.schema=n,o.ngModelOptions=o.ngModelOptions||{},o},l=function(e,r,a){if("string"===n(r.type)&&!r.enum){var o=i(e,r,a);return o.key=a.path,o.type="text",a.lookup[t.stringify(a.path)]=o,o}},s=function(e,r,a){if("number"===n(r.type)){var o=i(e,r,a);return o.key=a.path,o.type="number",a.lookup[t.stringify(a.path)]=o,o}},m=function(e,r,a){if("integer"===n(r.type)){var o=i(e,r,a);return o.key=a.path,o.type="number",a.lookup[t.stringify(a.path)]=o,o}},c=function(e,r,a){if("boolean"===n(r.type)){var o=i(e,r,a);return o.key=a.path,o.type="checkbox",a.lookup[t.stringify(a.path)]=o,o}},f=function(e,a,o){if("string"===n(a.type)&&a.enum){var l=i(e,a,o);return l.key=o.path,l.type="select",l.titleMap||(l.titleMap=r(a.enum)),o.lookup[t.stringify(o.path)]=l,l}},d=function(e,a,o){if("array"===n(a.type)&&a.items&&a.items.enum){var l=i(e,a,o);return l.key=o.path,l.type="checkboxes",l.titleMap||(l.titleMap=r(a.items.enum)),o.lookup[t.stringify(o.path)]=l,l}},u=function(r,a,l){if("object"===n(a.type)){var s=i(r,a,l);return s.type="fieldset",s.items=[],l.lookup[t.stringify(l.path)]=s,e.forEach(a.properties,function(e,n){var r=l.path.slice();if(r.push(n),!0!==l.ignore[t.stringify(r)]){var i=a.required&&-1!==a.required.indexOf(n),m=o(n,e,{path:r,required:i||!1,lookup:l.lookup,ignore:l.ignore,global:l.global});m&&s.items.push(m)}}),s}},p=function(e,r,a){if("array"===n(r.type)){var l=i(e,r,a);l.type="array",l.key=a.path,a.lookup[t.stringify(a.path)]=l;var s=r.required&&-1!==r.required.indexOf(a.path[a.path.length-1]),m=a.path.slice();return m.push(""),l.items=[o(e,r.items,{path:m,required:s||!1,lookup:a.lookup,ignore:a.ignore,global:a.global})],l}},h={string:[f,l],object:[u],number:[s],integer:[m],boolean:[c],array:[d,p]},g=function(e){return e};this.defaults=h,this.stdFormObj=i,this.defaultFormDefinition=o,this.postProcess=function(e){g=e},this.appendRule=function(e,t){h[e]||(h[e]=[]),h[e].push(t)},this.prependRule=function(e,t){h[e]||(h[e]=[]),h[e].unshift(t)},this.createStandardForm=i,this.$get=function(){var r={};return r.merge=function(n,o,i,l,s,m){o=o||["*"],l=l||{},s=s||n.readonly||n.readOnly;var c=r.defaults(n,i,l),f=o.indexOf("*");-1!==f&&(o=o.slice(0,f).concat(c.form).concat(o.slice(f+1)));var d=c.lookup;return g(o.map(function(o){if("string"==typeof o&&(o={key:o}),o.key&&"string"==typeof o.key&&(o.key=t.parse(o.key)),o.titleMap&&(o.titleMap=a(o.titleMap)),o.itemForm){o.items=[];var c=t.stringify(o.key),f=d[c];e.forEach(f.items,function(t){var n=e.copy(o.itemForm);n.key=t.key,o.items.push(n)})}if(o.key){var u=t.stringify(o.key);if(d[u]){var p=d[u];e.forEach(p,function(e,t){void 0===o[t]&&(o[t]=p[t])})}}return!0===s&&(o.readonly=!0),o.items&&(o.items=r.merge(n,o.items,i,l,o.readonly,m)),o.tabs&&e.forEach(o.tabs,function(e){e.items=r.merge(n,e.items,i,l,o.readonly,m)}),"checkbox"===o.type&&e.isUndefined(o.schema.default)&&(o.schema.default=!1),m&&"template"===o.type&&!o.template&&o.templateUrl&&m.push(o),o}))},r.defaults=function(t,r,a){var i=[],l={};if(r=r||{},a=a||{},"object"!==n(t.type))throw new Error('Not implemented. Only type "object" allowed at root level of schema.');return e.forEach(t.properties,function(e,n){if(!0!==r[n]){var s=t.required&&-1!==t.required.indexOf(n),m=o(n,e,{path:[n],lookup:l,ignore:r,required:s,global:a});m&&i.push(m)}}),{form:i,lookup:l}},r.traverseSchema=function(t,n,r,a){a=!e.isDefined(a)||a,r=r||[];var o=function(t,n,r){if(n(t,r),e.forEach(t.properties,function(e,t){var a=r.slice();a.push(t),o(e,n,a)}),!a&&t.items){var i=r.slice();i.push(""),o(t.items,n,i)}};o(t,n,r||[])},r.traverseForm=function(t,n){n(t),e.forEach(t.items,function(e){r.traverseForm(e,n)}),t.tabs&&e.forEach(t.tabs,function(t){e.forEach(t.items,function(e){r.traverseForm(e,n)})})},r}}]),e.module("schemaForm").factory("sfSelect",["sfPath",function(e){var t=/^\d+$/;return function(n,r,a){r||(r=this);var o="string"==typeof n?e.parse(n):n;if(void 0!==a&&1===o.length)return r[o[0]]=a,r;void 0!==a&&void 0===r[o[0]]&&(r[o[0]]=o.length>2&&t.test(o[1])?[]:{});for(var i=r[o[0]],l=1;l<o.length;l++){if(""===o[l])return;if(void 0!==a){if(l===o.length-1)return i[o[l]]=a,a;var s=i[o[l]];(void 0===s||null===s)&&(s=t.test(o[l+1])?[]:{},i[o[l]]=s),i=s}else i&&(i=i[o[l]])}return i}}]),e.module("schemaForm").factory("sfValidator",[function(){var t={};return t.validate=function(t,r){if(!t)return{valid:!0};var a=t.schema;if(!a)return{valid:!0};""===r&&(r=void 0),"number"===t.type&&null===r&&(r=void 0);var o={type:"object",properties:{}},i=t.key[t.key.length-1];o.properties[i]=a,t.required&&(o.required=[i]);var l={};return e.isDefined(r)&&(l[i]=r),n.validateResult(l,o)},t}]),e.module("schemaForm").directive("sfArray",["sfSelect","schemaForm","sfValidator","sfPath",function(t,n,r,a){var o=function(e){return function(t){t.key&&(t.key[t.key.indexOf("")]=e)}};return{restrict:"A",scope:!0,require:"?ngModel",link:function(i,l,s,m){var c={};i.validateArray=e.noop,m&&i.$emit("schemaFormPropagateNgModelController",m);var f=i.$watch(s.sfArray,function(l){if(l){var s=t(l.key,i.model),d=a.normalize(l.key);if(i.$watch("model"+("["!==d[0]?".":"")+d,function(e){s=i.modelArray=e}),e.isUndefined(s)&&(s=[],t(l.key,i.model,s)),i.modelArray=s,l.items){var u=l.items[0];l.items.length>1&&(u={type:"section",items:l.items.map(function(t){return t.ngModelOptions=l.ngModelOptions,e.isUndefined(t.readonly)&&(t.readonly=l.readonly),t})})}if(i.copyWithIndex=function(t){if(!c[t]&&u){var r=e.copy(u);r.arrayIndex=t,n.traverseForm(r,o(t)),c[t]=r}return c[t]},i.appendToArray=function(){var r=s.length,a=i.copyWithIndex(r);if(n.traverseForm(a,function(n){if(n.key){var r;e.isDefined(n.default)&&(r=n.default),e.isDefined(n.schema)&&e.isDefined(n.schema.default)&&(r=n.schema.default),e.isDefined(r)&&t(n.key,i.model,r)}}),r===s.length){var o,m=t("schema.items.type",l);"object"===m?o={}:"array"===m&&(o=[]),s.push(o)}return i.validateArray(),s},i.deleteFromArray=function(e){return s.splice(e,1),i.validateArray(),m&&m.$setDirty&&m.$setDirty(),s},l.titleMap||!0===l.startEmpty||0!==s.length||i.appendToArray(),l.titleMap&&l.titleMap.length>0){i.titleMapValues=[];var p=function(e){i.titleMapValues=[],e=e||[],l.titleMap.forEach(function(t){i.titleMapValues.push(-1!==e.indexOf(t.value))})};p(i.modelArray),i.$watchCollection("modelArray",p),i.$watchCollection("titleMapValues",function(e,t){if(e&&e!==t){for(var n=i.modelArray;n.length>0;)n.pop();l.titleMap.forEach(function(t,r){e[r]&&n.push(t.value)}),i.validateArray()}})}if(m){var h;i.validateArray=function(){var e=r.validate(l,i.modelArray.length>0?i.modelArray:void 0);Object.keys(m.$error).filter(function(e){return 0===e.indexOf("tv4-")}).forEach(function(e){m.$setValidity(e,!0)}),!1!==e.valid||!e.error||""!==e.error.dataPath&&e.error.dataPath!=="/"+l.key[l.key.length-1]||(m.$setViewValue(i.modelArray),h=e.error,m.$setValidity("tv4-"+e.error.code,!1))},i.$on("schemaFormValidate",i.validateArray),i.hasSuccess=function(){return i.options&&i.options.pristine&&!1===i.options.pristine.success?m.$valid&&!m.$pristine&&!m.$isEmpty(m.$modelValue):m.$valid&&(!m.$pristine||!m.$isEmpty(m.$modelValue))},i.hasError=function(){return i.options&&i.options.pristine&&!1===i.options.pristine.errors?m.$invalid&&!m.$pristine:m.$invalid},i.schemaError=function(){return h}}f()}})}}}]),e.module("schemaForm").directive("sfChanged",function(){return{require:"ngModel",restrict:"AC",scope:!1,link:function(t,n,r,a){var o=t.$eval(r.sfChanged);o&&o.onChange&&a.$viewChangeListeners.push(function(){e.isFunction(o.onChange)?o.onChange(a.$modelValue,o):t.evalExpr(o.onChange,{modelValue:a.$modelValue,form:o})})}}}),e.module("schemaForm").directive("sfField",["$parse","$compile","$http","$templateCache","$interpolate","$q","sfErrorMessage","sfPath","sfSelect",function(t,n,r,a,o,i,l,s,m){return{restrict:"AE",replace:!1,transclude:!1,scope:!0,require:"^sfSchema",link:{pre:function(e,t,n,r){e.$on("schemaFormPropagateNgModelController",function(t,n){t.stopPropagation(),t.preventDefault(),e.ngModel=n}),e.form=r.lookup["f"+n.sfField]},post:function(t,n,r,a){t.showTitle=function(){return t.form&&!0!==t.form.notitle&&t.form.title},t.listToCheckboxValues=function(t){var n={};return e.forEach(t,function(e){n[e]=!0}),n},t.checkboxValuesToList=function(t){var n=[];return e.forEach(t,function(e,t){e&&n.push(t)}),n},t.buttonClick=function(n,r){e.isFunction(r.onClick)?r.onClick(n,r):e.isString(r.onClick)&&(a?a.evalInParentScope(r.onClick,{$event:n,form:r}):t.$eval(r.onClick,{$event:n,form:r}))},t.evalExpr=function(e,n){return a?a.evalInParentScope(e,n):t.$eval(e,n)},t.evalInScope=function(e,n){return e?t.$eval(e,n):void 0},t.interp=function(e,t){return e&&o(e)(t)},t.hasSuccess=function(){return!!t.ngModel&&(t.options&&t.options.pristine&&!1===t.options.pristine.success?t.ngModel.$valid&&!t.ngModel.$pristine&&!t.ngModel.$isEmpty(t.ngModel.$modelValue):t.ngModel.$valid&&(!t.ngModel.$pristine||!t.ngModel.$isEmpty(t.ngModel.$modelValue)))},t.hasError=function(){return!!t.ngModel&&(t.options&&t.options.pristine&&!1===t.options.pristine.errors?t.ngModel.$invalid&&!t.ngModel.$pristine:t.ngModel.$invalid)},t.errorMessage=function(e){return l.interpolate(e&&e.code+""||"default",t.ngModel&&t.ngModel.$modelValue||"",t.ngModel&&t.ngModel.$viewValue||"",t.form,t.options&&t.options.validationMessage)};var i=t.form;i.key&&(t.$on("schemaForm.error."+i.key.join("."),function(e,n,r,a){(!0===r||!1===r)&&(a=r,r=void 0),t.ngModel&&n&&(t.ngModel.$setDirty?t.ngModel.$setDirty():(t.ngModel.$dirty=!0,t.ngModel.$pristine=!1),r&&(i.validationMessage||(i.validationMessage={}),i.validationMessage[n]=r),t.ngModel.$setValidity(n,!0===a),!0===a&&(t.ngModel.$validate(),t.$broadcast("schemaFormValidate")))}),t.$on("$destroy",function(){if(!t.externalDestructionInProgress){var e=i.destroyStrategy||t.options&&t.options.destroyStrategy||"remove";if(i.key&&"retain"!==e){var n=t.model;if(i.key.length>1&&(n=m(i.key.slice(0,i.key.length-1),n)),void 0===n)return;var r=i.schema&&i.schema.type||"";"empty"===e&&-1!==r.indexOf("string")?n[i.key.slice(-1)]="":"empty"===e&&-1!==r.indexOf("object")?n[i.key.slice(-1)]={}:"empty"===e&&-1!==r.indexOf("array")?n[i.key.slice(-1)]=[]:"null"===e?n[i.key.slice(-1)]=null:delete n[i.key.slice(-1)]}}}))}}}}]),e.module("schemaForm").directive("sfMessage",["$injector","sfErrorMessage",function(t,n){var r=t.has("$sanitize")?t.get("$sanitize"):function(e){return e};return{scope:!1,restrict:"EA",link:function(t,a,o){var i="";o.sfMessage&&t.$watch(o.sfMessage,function(e){e&&(i=r(e),m(!!t.ngModel))});var l,s=function(e){e!==l&&(a.html(e),l=e)},m=function(r){if(r)if(t.hasError()){var a=[];e.forEach(t.ngModel&&t.ngModel.$error,function(e,t){e&&a.push(t)}),a=a.filter(function(e){return"schemaForm"!==e});var o=a[0];s(o?n.interpolate(o,t.ngModel.$modelValue,t.ngModel.$viewValue,t.form,t.options&&t.options.validationMessage):i)}else s(i);else s(i)};m();var c=t.$watch("ngModel",function(e){e&&(e.$parsers.push(function(e){return m(!0),e}),e.$formatters.push(function(e){return m(!0),e}),c())});t.$watchCollection("ngModel.$error",function(){m(!!t.ngModel)})}}}]),e.module("schemaForm").directive("sfNewArray",["sfSelect","sfPath","schemaForm",function(t,n,r){return{scope:!1,link:function(a,o,i){a.min=0,a.modelArray=a.$eval(i.sfNewArray);var l=function(){a.modelArray=a.$eval(i.sfNewArray),(!(a.ngModel&&a.ngModel.$pristine&&a.firstDigest)||a.options&&!0===a.options.validateOnRender)&&a.validateField&&a.validateField()},s=function(){a.form&&a.form.onChange&&(e.isFunction(a.form.onChange)?a.form.onChange(a.modelArray,a.form):a.evalExpr(a.form.onChange,{modelValue:a.modelArray,form:a.form}))},m=function(){var e=a.modelArray;if(!e){var r=n.parse(i.sfNewArray);e=[],t(r,a,e),a.modelArray=e}return e},c=a.$watch("form",function(e){if(e){if(e.titleMap||!0===e.startEmpty||a.modelArray&&0!==a.modelArray.length||a.appendToArray(),a.form&&a.form.schema&&!0===a.form.schema.uniqueItems?(a.$watch(i.sfNewArray,l,!0),a.$watch([i.sfNewArray,i.sfNewArray+".length"],s)):a.$watchGroup?a.$watchGroup([i.sfNewArray,i.sfNewArray+".length"],function(){l(),s()}):(a.$watch(i.sfNewArray,function(){l(),s()}),a.$watch(i.sfNewArray+".length",function(){l(),s()})),e.titleMap&&e.titleMap.length>0){a.titleMapValues=[];var t=function(t){a.titleMapValues=[],t=t||[],e.titleMap.forEach(function(e){a.titleMapValues.push(-1!==t.indexOf(e.value))})};t(a.modelArray),a.$watchCollection("modelArray",t),a.$watchCollection("titleMapValues",function(t,n){if(t&&t!==n){for(var r=m();r.length>0;)r.pop();e.titleMap.forEach(function(e,n){t[n]&&r.push(e.value)}),a.validateField&&a.validateField()}})}c()}});a.appendToArray=function(){var n,o=m();if(a.form&&a.form.schema&&a.form.schema.items){var i=a.form.schema.items;i.type&&-1!==i.type.indexOf("object")?(n={},a.options&&!1===a.options.setSchemaDefaults||(n=e.isDefined(i.default)?i.default:n)&&r.traverseSchema(i,function(r,a){e.isDefined(r.default)&&t(a,n,r.default)})):i.type&&-1!==i.type.indexOf("array")?(n=[],a.options&&!1===a.options.setSchemaDefaults||(n=i.default||n)):a.options&&!1===a.options.setSchemaDefaults||(n=i.default||n)}return o.push(n),o},a.deleteFromArray=function(e){var t=a.modelArray;return t&&t.splice(e,1),t};var f=function(e){return function(t){t.key&&(t.key[t.key.indexOf("")]=e)}},d={};a.copyWithIndex=function(t){var n=a.form;if(!d[t]){var o=n.items[0];if(n.items.length>1&&(o={type:"section",items:n.items.map(function(t){return t.ngModelOptions=n.ngModelOptions,e.isUndefined(t.readonly)&&(t.readonly=n.readonly),t})}),o){var i=e.copy(o);i.arrayIndex=t,r.traverseForm(i,f(t)),d[t]=i}}return d[t]}}}}]),e.module("schemaForm").directive("sfSchema",["$compile","$http","$templateCache","$q","schemaForm","schemaFormDecorators","sfSelect","sfPath","sfBuilder",function(t,n,r,a,o,i,l,s,m){return{scope:{schema:"=sfSchema",initialForm:"=sfForm",model:"=sfModel",options:"=sfOptions"},controller:["$scope",function(e){this.evalInParentScope=function(t,n){return e.$parent.$eval(t,n)};var t=this;e.lookup=function(e){return e&&(t.lookup=e),t.lookup}}],replace:!1,restrict:"A",transclude:!0,require:"?form",link:function(s,c,f,d,u){s.formCtrl=d;var p={};u(s,function(e){if(e.addClass("schema-form-ignore"),c.prepend(e),c[0].querySelectorAll){var t=c[0].querySelectorAll("[ng-model]");if(t)for(var n=0;n<t.length;n++){var r=t[n].getAttribute("ng-model");p[r.substring(r.indexOf(".")+1)]=!0}}});var h,g={},v=function(e,t){var i=[],l=o.merge(e,t,p,s.options,void 0,i);i.length>0?a.all(i.map(function(e){return n.get(e.templateUrl,{cache:r}).then(function(t){e.template=t.data})})).then(function(){y(e,t,l)}):y(e,t,l)},y=function(n,r,a){h&&(s.externalDestructionInProgress=!0,h.$destroy(),s.externalDestructionInProgress=!1),h=s.$new(),h.schemaForm={form:a,schema:n},c.children(":not(.schema-form-ignore)").remove();for(var d={},u=c[0].querySelectorAll("*[sf-insert-field]"),p=0;p<u.length;p++)d[u[p].getAttribute("sf-insert-field")]=u[p];var g=i.decorator(f.sfUseDecorator),v=Object.create(null);s.lookup(v),c[0].appendChild(m.build(a,g,d,v)),h.firstDigest=!0,setTimeout(function(){h.firstDigest=!1},0),t(c.children())(h),s.options&&!1===s.options.setSchemaDefaults||o.traverseSchema(n,function(t,n){if(e.isDefined(t.default)){var r=l(n,s.model);e.isUndefined(r)&&l(n,s.model,t.default)}}),s.$emit("sf-render-finished",c)},b=["*"];s.$watch(function(){var e=s.schema,t=s.initialForm||b;t&&e&&e.type&&(g.form!==t||g.schema!==e)&&Object.keys(e.properties).length>0&&(g.schema=e,g.form=t,v(e,t))}),s.$on("schemaFormRedraw",function(){var t=s.schema,n=s.initialForm?e.copy(s.initialForm):["*"];t&&v(t,n)}),s.$on("$destroy",function(){s.externalDestructionInProgress=!0}),s.evalExpr=function(e,t){return s.$parent.$eval(e,t)}}}}]),e.module("schemaForm").directive("schemaValidate",["sfValidator","$parse","sfSelect",function(t,n,r){return{restrict:"A",scope:!1,priority:500,require:"ngModel",link:function(n,a,o,i){n.$emit("schemaFormPropagateNgModelController",i);var l=null,s=n.$eval(o.schemaValidate);s.copyValueTo&&i.$viewChangeListeners.push(function(){var t=s.copyValueTo;e.forEach(t,function(e){r(e,n.model,i.$modelValue)})});var m=function(e){if(!s)return e;if(n.options&&!1===n.options.tv4Validation)return e;var r=t.validate(s,e);return Object.keys(i.$error).filter(function(e){return 0===e.indexOf("tv4-")}).forEach(function(e){i.$setValidity(e,!0)}),r.valid?e:(i.$setValidity("tv4-"+r.error.code,!1),l=r.error,i.$validators?e:void 0)};"function"==typeof s.ngModel&&s.ngModel(i),["$parsers","$viewChangeListeners","$formatters"].forEach(function(e){s[e]&&i[e]&&s[e].forEach(function(t){i[e].push(t)})}),["$validators","$asyncValidators"].forEach(function(t){s[t]&&i[t]&&e.forEach(s[t],function(e,n){i[t][n]=e})}),i.$parsers.push(m),i.$validators&&(i.$validators.schemaForm=function(){return!Object.keys(i.$error).some(function(e){return"schemaForm"!==e})});var c=s.schema;n.validateField=function(e){(void 0==e||i.$$parentForm.$name===e)&&(c&&-1!==c.type.indexOf("array")&&m(i.$modelValue),i.$setDirty?(i.$setDirty(),i.$setViewValue(i.$viewValue),i.$commitViewValue(),s.required&&i.$isEmpty(i.$modelValue)&&i.$setValidity("tv4-302",!1)):i.$setViewValue(i.$viewValue))},i.$formatters.push(function(e){return!i.$pristine||!n.firstDigest||n.options&&!0===n.options.validateOnRender?(m(i.$modelValue),e):e}),n.$on("schemaFormValidate",function(e,t){n.validateField(t)}),n.schemaError=function(){return l}}}}]),a})},function(e,t,n){e.exports=n(25).ObjectPath},function(e,t,n){"use strict";var r;!function(a){var o={parse:function(e){if("string"!=typeof e)throw new TypeError("ObjectPath.parse must be passed a string");for(var t,n,r,a,o=0,i=[];o<e.length;)if(t=e.indexOf(".",o),n=e.indexOf("[",o),-1===t&&-1===n)i.push(e.slice(o,e.length)),o=e.length;else if(-1===n||-1!==t&&t<n)i.push(e.slice(o,t)),o=t+1;else if(n>o&&(i.push(e.slice(o,n)),o=n),'"'!==(r=e.slice(n+1,n+2))&&"'"!==r)a=e.indexOf("]",n),-1===a&&(a=e.length),i.push(e.slice(o+1,a)),o="."===e.slice(a+1,a+2)?a+2:a+1;else{for(a=e.indexOf(r+"]",n),-1===a&&(a=e.length);"\\"===e.slice(a-1,a)&&n<e.length;)n++,a=e.indexOf(r+"]",n);i.push(e.slice(o+2,a).replace(new RegExp("\\"+r,"g"),r)),o="."===e.slice(a+2,a+3)?a+3:a+2}return i},stringify:function(e,t){return Array.isArray(e)||(e=[e.toString()]),t='"'===t?'"':"'",e.map(function(e){return"["+t+e.toString().replace(new RegExp(t,"g"),"\\"+t)+t+"]"}).join("")},normalize:function(e,t){return o.stringify(Array.isArray(e)?e:o.parse(e),t)},registerModule:function(e){e.module("ObjectPath",[]).provider("ObjectPath",function(){this.parse=o.parse,this.stringify=o.stringify,this.normalize=o.normalize,this.$get=function(){return o}})}};void 0!==(r=function(){return{ObjectPath:o}}.call(t,n,t,e))&&(e.exports=r)}()},function(e,t){e.exports=angular},function(e,t){e.exports=tv4},,function(e,t,n){n(23),e.exports=n(3)}]);